# Postavleno_Bot

Postavleno_Bot ‚Äî —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–µ–π—á–∞—Å —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–º. –í—Å–µ —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ñ–∞–π–ª–∞—Ö, –ø–∞—Ä–æ–ª–∏ —à–∏—Ñ—Ä—É—é—Ç—Å—è `bcrypt`, –∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω–æ–µ –∫–∞—Ä—Ç–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–ø—Ä–∏–º–µ—Ä –¥–ª—è Windows):
   ```powershell
   git clone https://github.com/<your-account>/Postavleno_Bot.git
   cd Postavleno_Bot
   python -m venv .venv
   .venv\Scripts\activate
   python -m pip install -U pip
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ dev-–Ω–∞–±–æ—Ä –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
   ```powershell
   pip install -e ".[dev]"
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —É–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:
   ```powershell
   copy .env.example .env
   ```
   –í `.env` –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–¥–∞—Ç—å `BOT_TOKEN`. –ü–æ –∂–µ–ª–∞–Ω–∏—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `ACCOUNTS_DIR` –∏ `DELETE_USER_MESSAGES`.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```powershell
   python -m postavleno_bot.main
   ```

> –ß—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø—É—Å–∫ polling (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `POSTAVLENO_BOT_SKIP_POLLING=1`.

## üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ —ç–∫—Ä–∞–Ω—ã

–í —á–∞—Ç–µ –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–¥–Ω–∞ ¬´–∫–∞—Ä—Ç–æ—á–∫–∞¬ª —Å –∫–Ω–æ–ø–∫–∞–º–∏. –ü–µ—Ä–µ—Ö–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ —Å—Ç–µ–∫ –∏ –∫–Ω–æ–ø–∫—É ¬´–ù–∞–∑–∞–¥¬ª.

| –≠–∫—Ä–∞–Ω | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–Ω–æ–ø–∫–∏ |
|-------|----------|--------|
| **–ì–ª–∞–≤–Ω–∞—è** | ¬´–ü—Ä–∏–≤–µ—Ç! –Ø Postavleno_Bot‚Ä¶¬ª ‚Äî –ø—Ä–∏–∑—ã–≤ –Ω–∞—á–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é. | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ¬∑ –û–±–Ω–æ–≤–∏—Ç—å ¬∑ –í—ã–π—Ç–∏ |
| **–ú–µ–Ω—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** | –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é, –≤—ã–±–æ—Ä –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ¬∑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ¬∑ –û–±–Ω–æ–≤–∏—Ç—å ¬∑ –ù–∞–∑–∞–¥ ¬∑ –í—ã–π—Ç–∏ |
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | –ü–æ—à–∞–≥–æ–≤—ã–π –≤–≤–æ–¥ –ª–æ–≥–∏–Ω–∞ ‚Üí –ø–∞—Ä–æ–ª—è. –û—à–∏–±–∫–∞ ¬´–ê–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω¬ª ‚Äî —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å/–í—ã–π—Ç–∏. | –ù–∞–∑–∞–¥ ¬∑ –í—ã–π—Ç–∏ |
| **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–Ω–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å, –ø–∞—Ä–æ–ª—å ‚â• 6 —Å–∏–º–≤–æ–ª–æ–≤. | –ù–∞–∑–∞–¥ ¬∑ –í—ã–π—Ç–∏ |
| **–ü—Ä–æ—Ñ–∏–ª—å** | –ö–æ–º–ø–∞–Ω–∏—è, –ª–æ–≥–∏–Ω, –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø–æ—á—Ç–∞, —Å—Ç–∞—Ç—É—Å—ã API-–∫–ª—é—á–µ–π. | –°–º–µ–Ω–∏—Ç—å WB API ¬∑ –°–º–µ–Ω–∏—Ç—å ¬´–ú–æ–π –°–∫–ª–∞–¥¬ª API ¬∑ –°–º–µ–Ω–∏—Ç—å –ü–æ—á—Ç—É ¬∑ –û–±–Ω–æ–≤–∏—Ç—å ¬∑ –ù–∞–∑–∞–¥ ¬∑ –í—ã–π—Ç–∏ —Å –ü—Ä–æ—Ñ–∏–ª—è ¬∑ –í—ã–π—Ç–∏ |
| **–†–µ–¥–∞–∫—Ç–æ—Ä WB/MS** | –ó–∞–ø—Ä–æ—Å –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ä–µ–≥–µ–∫—Å–ø–∞–º. | –ù–∞–∑–∞–¥ ¬∑ –í—ã–π—Ç–∏ |
| **–ü–æ—á—Ç–∞** | –ó–∞–≥–ª—É—à–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º ¬´–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email¬ª. | –ù–∞–∑–∞–¥ ¬∑ –í—ã–π—Ç–∏ |
| **–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≤–≤–æ–¥** | ¬´–Ø –Ω–µ –ø–æ–Ω—è–ª –∑–∞–ø—Ä–æ—Å ü§î‚Ä¶¬ª ‚Äî –∫–Ω–æ–ø–∫–∏ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å (–≤–µ—Ä–Ω—ë—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É) –∏ –í—ã–π—Ç–∏. | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å ¬∑ –í—ã–π—Ç–∏ |

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –≤–≤–æ–¥–µ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è/—Ç–æ–∫–µ–Ω–æ–≤ —É–¥–∞–ª—è—é—Ç—Å—è (–µ—Å–ª–∏ `DELETE_USER_MESSAGES=true`).

## üóÇÔ∏è –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

```
data/
  accounts/
    <username>/
      profile.json
```

`profile.json` —Å–æ–¥–µ—Ä–∂–∏—Ç:
```json
{
  "display_login": "My.Shop",
  "username": "my.shop",
  "password_hash": "$2b$12$...",
  "created_at": "2025-01-01T12:00:00+00:00",
  "company_name": "My.Shop",
  "email": null,
  "wb_api": null,
  "ms_api": null
}
```

* –ü–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ bcrypt-—Ö–µ—à (`bcrypt`).
* WB-—Ç–æ–∫–µ–Ω—ã –¥–æ–ø—É—Å–∫–∞—é—Ç 32‚Äì4096 —Å–∏–º–≤–æ–ª–æ–≤ `[A-Za-z0-9._=-]`.
* –¢–æ–∫–µ–Ω—ã ¬´–ú–æ–π –°–∫–ª–∞–¥¬ª ‚Äî 16‚Äì4096 —Å–∏–º–≤–æ–ª–æ–≤ `[A-Za-z0-9._:/+=-]`.

## ‚öôÔ∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* `orjson` ‚Äî –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `json` (—Ñ—É–Ω–∫—Ü–∏—è `json_dumps`).
* `httpx[http2]` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç HTTP/2, –Ω–æ –±–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ –ø–∞–∫–µ—Ç–∞ `h2`.

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
pytest
ruff check src tests
black --check src tests
mypy src
```

## üñºÔ∏è –°–∫—Ä–∏–Ω—à–æ—Ç—ã

–í –∫–∞—Ç–∞–ª–æ–≥–µ `docs/screenshots/` –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –º–µ—Å—Ç–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–ª–∞–≤–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤ (Home, Auth, Profile). –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π.
