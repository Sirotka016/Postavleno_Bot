# Postavleno_Bot

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –≠—Ç–æ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ Wildberries. –û–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–û–±–Ω–æ–≤–∏—Ç—å¬ª –∏ ¬´–í—ã–π—Ç–∏¬ª. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –±–æ—Ç–∞, –∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—É—Ä–æ–≤–Ω–µ.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±–æ–π –∏–∑ —Ç–æ–∫–µ–Ω–æ–≤ `TELEGRAM_BOT_TOKEN`/`BOT_TOKEN`/`TG_BOT_TOKEN`, –¥–æ–±–∞–≤—å—Ç–µ `WB_API_TOKEN` –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ú–æ–π–°–∫–ª–∞–¥ (`MOYSKLAD_TOKEN` –¥–ª—è Bearer-—Ä–µ–∂–∏–º–∞ –∏–ª–∏ `MOYSKLAD_LOGIN`/`MOYSKLAD_PASSWORD` –¥–ª—è Basic). –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `MOYSKLAD_AUTH_MODE`, `LOG_LEVEL`/`LOG_RICH`/`LOG_JSON` –∏ —É–∫–∞–∂–∏—Ç–µ `LOCAL_STORE_NAME` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–æ–ª–æ–Ω–∫–µ ¬´–°–∫–ª–∞–¥¬ª –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   pip install -r requirements-dev.txt  # –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
   pip install -e .                     # –ø–æ–¥–∫–ª—é—á–∞–µ–º –ø–∞–∫–µ—Ç –∏–∑ src/
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python -m postavleno_bot.main
   ```

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Windows, PowerShell)
```powershell
# 1) –û–¥–∏–Ω —Ä–∞–∑
tools\win\bootstrap.ps1

# 2) –ö–∞–∂–¥—ã–π —Ä–∞–∑ –≤ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
.\.venv\Scripts\Activate.ps1

# 3) –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python -m postavleno_bot.main   # –∏–ª–∏: python -m postavleno_bot

# 4) –ü—Ä–æ–≤–µ—Ä–∫–∏
tools\win\tasks.ps1 all
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç: –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å inline-–∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏

–ë–æ—Ç –∂–∏–≤—ë—Ç –≤ —Ä–µ–∂–∏–º–µ ¬´–æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ¬ª. –ü–æ—Å–ª–µ `/start` –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏ ¬´üîÑ –û–±–Ω–æ–≤–∏—Ç—å¬ª –∏ ¬´üö™ –í—ã–π—Ç–∏¬ª. –õ—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —ç—Ç—É –∫–∞—Ä—Ç–æ—á–∫—É –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ –∏ —Ä–µ–ø–ª–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–æ—Ç —Å—Ç–∞—Ä–∞–µ—Ç—Å—è —É–¥–∞–ª—è—Ç—å, —á—Ç–æ–±—ã –≤ —á–∞—Ç–µ –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞.

–ö–Ω–æ–ø–∫–∞ ¬´üîÑ –û–±–Ω–æ–≤–∏—Ç—å¬ª –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –∏ –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –º–µ—Å—Ç–µ, –∞ ¬´üö™ –í—ã–π—Ç–∏¬ª —É–¥–∞–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∏ –æ—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤. –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `aiogram 3.x` –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ `Rich`, –∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ `logs/app.json` —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-–∑–∞–ø–∏—Å–∏ —Å `request_id`, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üì¶ –û—Å—Ç–∞—Ç–∫–∏ WB

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç `httpx` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTTP/2 –∏ —Å–∂–∞—Ç–∏–µ–º gzip. –ï—Å–ª–∏ HTTP/2 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –ø–∞–∫–µ—Ç `h2` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ HTTP/1.1 –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É. –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `supplier/stocks` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ; –ø—Ä–∏ –æ—Ç–≤–µ—Ç–∞—Ö `429`/5xx –æ–±—ë—Ä—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—ã —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff –∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç `Retry-After`.
* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –Ω–∞ 3 –º–∏–Ω—É—Ç—ã. –õ–æ–≥–∏ `wb.fetch` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `cache_hit` –∏ `rows`, –ø–æ—ç—Ç–æ–º—É –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –∏–ª–∏ –¥–æ–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö.
* –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (`build_pages_grouped_by_warehouse`) –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∫–ª–∞–¥–∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ.
* –≠–∫—Å–ø–æ—Ä—Ç ¬´üì¶ –û—Å—Ç–∞—Ç–∫–∏ WB¬ª —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç DataFrame –∏ Excel —á–µ—Ä–µ–∑ XlsxWriter. –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–∏–ø—ã, –∏–º—è –ª–∏—Å—Ç–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ `LOCAL_STORE_NAME` (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Excel –≤ 31 —Å–∏–º–≤–æ–ª –∏ –∑–∞–ø—Ä–µ—Ç–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏). –°–æ–±—ã—Ç–∏—è `export.sent`/`export.saved` –æ—Ç—Ä–∞–∂–∞—é—Ç –º–æ–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞.

### üè¨ –û—Å—Ç–∞—Ç–∫–∏ –°–∫–ª–∞–¥ (–ú–æ–π–°–∫–ª–∞–¥)

* WB-–∞—Ä—Ç–∏–∫—É–ª—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –±–µ–∑ –¥—É–±–ª–µ–π. –ë–∞—Ç—á–∏ –¥–æ 50 –ø–æ–∑–∏—Ü–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º `MOYSKLAD_MAX_CONCURRENCY`, –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `request_with_retry` —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff.
* –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞—Ä—Ç–∏–∫—É–ª–∞ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –∫–ª–æ–Ω—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –±–∞—Ç—á–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç fallback –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –æ–±—Ö–æ–¥ `/report/stock/all`. –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ `ms.fetch.start/done`, `ms.batch` –∏ `ms.fetch.fallback`, –ø–æ—ç—Ç–æ–º—É –ø–æ–Ω—è—Ç–Ω–æ, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —É—à–ª–æ –Ω–∞ –ú–æ–π–°–∫–ª–∞–¥.
* –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ DataFrame Wildberries: –∫–æ–ª–æ–Ω–∫–∞ ¬´–°–∫–ª–∞–¥¬ª –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è `LOCAL_STORE_NAME`, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è—Ö. `store.merge.stats` —Å–æ–æ–±—â–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫, —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∞—Ä—Ç–∏–∫—É–ª–æ–≤, —Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π –Ω–∞—à–ª–∏ –≤ –ú–æ–π–°–∫–ª–∞–¥ –∏ —Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–º–µ–Ω–∏–ª–∏.
* Excel –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ —Ç–∞–∫–∂–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ XlsxWriter (–ª–∏—Å—Ç ‚Äî `LOCAL_STORE_NAME`, —à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫ –ø–æ–¥–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `var/exports/ostatki_store_YYYYMMDD_HHMM.xlsx`. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç `store.export.saved` –∏ `store.export.sent`.

### HTTP/2 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é HTTP/2 –æ—Ç–∫–ª—é—á—ë–Ω (`HTTP2_ENABLED=false`) ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–∞–∂–µ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ `h2`.
* –ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å HTTP/2, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ extras –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  ```bash
  pip install "httpx[http2]"
  export HTTP2_ENABLED=true  # –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env
  ```
* –ï—Å–ª–∏ –ø–∞–∫–µ—Ç `h2` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º —Ñ–ª–∞–≥–µ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–π–¥—ë—Ç –Ω–∞ HTTP/1.1 –∏ –∑–∞–ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ `http2.requested_but_unavailable outcome=fallback_to_http1`.
* –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–Ω–æ, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ `HTTP2_ENABLED=false` (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ).

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ú–æ–π–°–∫–ª–∞–¥ –∏ —ç–∫—Å–ø–æ—Ä—Ç)

| –ò–º—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| --- | --- | --- |
| `MOYSKLAD_AUTH_MODE` | –¢–∏–ø –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ API –ú–æ–π–°–∫–ª–∞–¥: `token` (Bearer) –∏–ª–∏ `basic` | `token` |
| `MOYSKLAD_TOKEN` | API-—Ç–æ–∫–µ–Ω –ú–æ–π–°–∫–ª–∞–¥ –¥–ª—è Bearer-—Ä–µ–∂–∏–º–∞ | ‚Äî |
| `MOYSKLAD_LOGIN` / `MOYSKLAD_PASSWORD` | –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è Basic-—Ä–µ–∂–∏–º–∞ | ‚Äî |
| `MOYSKLAD_PAGE_SIZE` | –õ–∏–º–∏—Ç —Å—Ç—Ä–æ–∫ –ø—Ä–∏ –æ–±—Ö–æ–¥–µ `/report/stock/all` (fallback) | `1000` |
| `MOYSKLAD_QUANTITY_FIELD` | –ü–æ–ª–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ –ú–æ–π–°–∫–ª–∞–¥ –¥–ª—è —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (`quantity` –∏–ª–∏ `stock`) | `quantity` |
| `MOYSKLAD_MAX_CONCURRENCY` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ú–æ–π–°–∫–ª–∞–¥ | `6` |
| `MOYSKLAD_RETRY_ATTEMPTS` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ 429/5xx | `4` |
| `MOYSKLAD_RETRY_BASE_DELAY` | –ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã) | `0.5` |
| `LOCAL_STORE_NAME` | –ò–º—è –ª–∏—Å—Ç–∞ Excel –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ ¬´–°–∫–ª–∞–¥¬ª | `FootballShop` |

–î–ª—è ¬´üì¶ –û—Å—Ç–∞—Ç–∫–∏ WB¬ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω `WB_API_TOKEN` –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ Statistics. –ö—ç—à Wildberries –∂–∏–≤—ë—Ç 3 –º–∏–Ω—É—Ç—ã: –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL –æ—Ç–¥–∞—Å—Ç –∫—ç—à (–≤ –ª–æ–≥–µ `wb.fetch` –±—É–¥–µ—Ç `cache_hit=true`).

**–°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**

* Wildberries Reports API ‚Äî <https://dev.wildberries.ru/en/openapi/reports>
* –ú–æ–π–°–∫–ª–∞–¥ Remap 1.2 ‚Äî <https://dev.moysklad.ru/doc/api/remap/1.2/>

## –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

* –õ–∏–Ω—Ç–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã: `ruff`, `black`, `mypy`.
* –¢–µ—Å—Ç—ã: `pytest`.

–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–∂–Ω–æ —Ç–∞–∫:
```bash
ruff --fix src tests
black src tests
mypy src
pytest
```
