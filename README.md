# Postavleno_Bot

Postavleno_Bot โ ัะตะปะตะณัะฐะผ-ะฑะพั, ะบะพัะพััะน ัะตะนัะฐั ัะพะบััะธััะตััั ะฝะฐ ะฑะฐะทะพะฒะพะน ะฐะฒัะพัะธะทะฐัะธะธ, ัะตะณะธัััะฐัะธะธ ะธ ัะฟัะฐะฒะปะตะฝะธะธ ะฟัะพัะธะปะตะผ. ะัะต ััััะฝัะต ะทะฐะฟะธัะธ ััะฐะฝัััั ะปะพะบะฐะปัะฝะพ ะฒ ัะฐะนะปะฐั, ะฟะฐัะพะปะธ ัะธััััััั `bcrypt`, ะฐ ะฝะฐะฒะธะณะฐัะธั ัะฐะฑะพัะฐะตั ัะตัะตะท ะตะดะธะฝะพะต ะบะฐััะพัะฝะพะต ัะพะพะฑัะตะฝะธะต ะฒ ัะฐัะต.

## ๐ ะัััััะน ััะฐัั

1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน ะธ ัะพะทะดะฐะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต (ะฟัะธะผะตั ะดะปั Windows):
   ```powershell
   git clone https://github.com/<your-account>/Postavleno_Bot.git
   cd Postavleno_Bot
   python -m venv .venv
   .venv\Scripts\activate
   python -m pip install -U pip
   ```
2. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ ะธ dev-ะฝะฐะฑะพั ะพะดะฝะพะน ะบะพะผะฐะฝะดะพะน:
   ```powershell
   pip install -e ".[dev]"
   ```
3. ะกะบะพะฟะธััะนัะต ะฟัะธะผะตั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั ะธ ัะบะฐะถะธัะต ัะพะบะตะฝ ะฑะพัะฐ:
   ```powershell
   copy .env.example .env
   ```
   ะ `.env` ะดะพััะฐัะพัะฝะพ ะทะฐะดะฐัั `BOT_TOKEN`. ะะพ ะถะตะปะฐะฝะธั ะผะพะถะฝะพ ะฟะตัะตะพะฟัะตะดะตะปะธัั `ACCOUNTS_DIR` ะธ `DELETE_USER_MESSAGES`.
4. ะะฐะฟัััะธัะต ะฑะพัะฐ:
   ```powershell
   python -m postavleno_bot.main
   ```

> ะงัะพะฑั ะฟัะพะฟัััะธัั ะทะฐะฟััะบ polling (ะฝะฐะฟัะธะผะตั, ะฒะพ ะฒัะตะผั ัะตััะพะฒ), ัััะฐะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัั `POSTAVLENO_BOT_SKIP_POLLING=1`.

## ๐งญ ะะฐะฒะธะณะฐัะธั ะธ ัะบัะฐะฝั

ะ ัะฐัะต ะฒัะตะณะดะฐ ะพัะพะฑัะฐะถะฐะตััั ะพะดะฝะฐ ยซะบะฐััะพัะบะฐยป ั ะบะฝะพะฟะบะฐะผะธ. ะะตัะตัะพะดั ัะฐะฑะพัะฐัั ัะตัะตะท ััะตะบ ะธ ะบะฝะพะฟะบั ยซะะฐะทะฐะดยป.

| ะญะบัะฐะฝ | ะะฟะธัะฐะฝะธะต | ะะฝะพะฟะบะธ |
|-------|----------|--------|
| **ะะปะฐะฒะฝะฐั (ะณะพััั)** | ยซะัะธะฒะตั! ะฏ Postavleno_Bot ๐โฆยป โ ะฟัะธะฒะตัััะฒะธะต, ะฟะพััะฝะตะฝะธะต ัะตะผ ะฑะพั ะฟะพะผะพะณะฐะตั ะธ ะฟัะธะณะปะฐัะตะฝะธะต ะฝะฐัะฐัั ั ะฒัะพะดะฐ. | ๐ ะะฒัะพัะธะทะฐัะธั ยท ๐ ะะตะณะธัััะฐัะธั ยท ๐ ะะฑะฝะพะฒะธัั ยท โ๏ธ ะัะนัะธ |
| **ะะปะฐะฒะฝะฐั (ะฟัะพัะธะปั)** | ยซะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั, <ะบะพะผะฟะฐะฝะธั>!ยป + ะฑะปะพะบ ยซะกัะฐััั ะธะฝัะตะณัะฐัะธะนยป ั ะพัะผะตัะบะฐะผะธ โ/โ ะธ ะฟะพะดัะบะฐะทะบะพะน ะพัะบัััั ะฟัะพัะธะปั. | ๐ค ะัะพัะธะปั ยท ๐ช ะัะนัะธ ะธะท ะฟัะพัะธะปั ยท ๐๏ธ ะฃะดะฐะปะธัั ะฐะบะบะฐัะฝั ยท ๐ ะะฑะฝะพะฒะธัั ยท โ๏ธ ะัะนัะธ |
| **ะฃะดะฐะปะตะฝะธะต ะฐะบะบะฐัะฝัะฐ** | ะะฐััะพัะบะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั ยซะญัะพ ะดะตะนััะฒะธะต ะฝะฐะฒัะตะณะดะฐ ัะดะฐะปะธั ะฒะฐั ะฐะบะบะฐัะฝัโฆยป ั ะฒะพะฟัะพัะพะผ ยซะั ัะฒะตัะตะฝั?ยป. | ะฃะดะฐะปะธัั ยท ะะฐะทะฐะด ยท โ๏ธ ะัะนัะธ |
| **ะขัะตะฑัะตััั ะฐะฒัะพัะธะทะฐัะธั** | ะะพะบะฐะทัะฒะฐะตััั ะฟัะธ ะฟะพะฟััะบะต ะพัะบัััั ะทะฐัะธััะฝะฝัะน ัะฐะทะดะตะป ะฑะตะท ะฐะบัะธะฒะฝะพะน ัะตััะธะธ. | ๐ ะะฒัะพัะธะทะฐัะธั ยท ๐ ะะตะณะธัััะฐัะธั ยท โ๏ธ ะัะนัะธ |
| **ะะฒัะพัะธะทะฐัะธั** | ะะพัะฐะณะพะฒัะน ะฒะฒะพะด ะปะพะณะธะฝะฐ โ ะฟะฐัะพะปั. ะัะธะฑะบะฐ ยซะะบะบะฐัะฝั ะฝะต ะฝะฐะนะดะตะฝยป ะฒัะฒะพะดะธััั ะพัะดะตะปัะฝะพะน ะบะฐััะพัะบะพะน ั ะะพะฒัะพัะธัั/โ๏ธ ะัะนัะธ. | ะะฐะทะฐะด ยท โ๏ธ ะัะนัะธ |
| **ะะตะณะธัััะฐัะธั** | ะัะพะฒะตัะบะฐ ะปะพะณะธะฝะฐ ะฝะฐ ัะฝะธะบะฐะปัะฝะพััั ะธ ะฟะฐัะพะปั โฅ 6 ัะธะผะฒะพะปะพะฒ. | ะะฐะทะฐะด ยท โ๏ธ ะัะนัะธ |
| **ะัะพัะธะปั** | ๐ค ะัะพัะธะปั, ะบะพะผะฟะฐะฝะธั, ะปะพะณะธะฝ, ะดะฐัะฐ ัะตะณะธัััะฐัะธะธ, ะฟะพััะฐ, ััะฐัััั API-ะบะปััะตะน. | ๐ ะกะผะตะฝะธัั WB API ยท ๐ ะกะผะตะฝะธัั ยซะะพะน ะกะบะปะฐะดยป API ยท โ๏ธ ะกะผะตะฝะธัั ะฟะพััั (ัะบะพัะพ) ยท ๐ ะะฑะฝะพะฒะธัั ยท โฌ๏ธ ะะฐะทะฐะด ยท ๐ช ะัะนัะธ ะธะท ะฟัะพัะธะปั ยท โ๏ธ ะัะนัะธ |
| **ะะตะดะฐะบัะพั WB/MS** | ะะฐะฟัะพั ะฝะพะฒะพะณะพ ะบะปััะฐ ะธ ะฟัะพะฒะตัะบะฐ ะฟะพ ัะฐััะธัะตะฝะฝัะผ ัะตะณะตะบัะฟะฐะผ. | ะะฐะทะฐะด ยท โ๏ธ ะัะนัะธ |
| **ะะพััะฐ** | ะะฐะณะปััะบะฐ ั ัะตะบััะพะผ ยซะกะบะพัะพ ะทะดะตัั ะฟะพัะฒะธััั ะฟะพะดัะฒะตัะถะดะตะฝะธะต emailยป. | ะะฐะทะฐะด ยท โ๏ธ ะัะนัะธ |
| **ะะตะธะทะฒะตััะฝัะน ะฒะฒะพะด** | ยซะฅะผะผโฆ ั ะฝะต ะฟะพะฝัะป ะทะฐะฟัะพั ๐คโฆยป โ ะบะฝะพะฟะบะธ ะะพะฒัะพัะธัั (ะฒะพะทะฒัะฐั ะบ ะฟัะตะดัะดััะตะผั ัะบัะฐะฝั) ะธ โ๏ธ ะัะนัะธ. | ะะพะฒัะพัะธัั ยท โ๏ธ ะัะนัะธ |

ะัะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะต ัะพะพะฑัะตะฝะธั ะฟัะธ ะฒะฒะพะดะต ะปะพะณะธะฝะฐ/ะฟะฐัะพะปั/ัะพะบะตะฝะพะฒ ัะดะฐะปััััั (ะตัะปะธ `DELETE_USER_MESSAGES=true`).

## ๐๏ธ ะะพะบะฐะปัะฝะพะต ััะฐะฝะธะปะธัะต

```
data/
  accounts/
    <username>/
      profile.json
  sessions.json
```

`profile.json` ัะพะดะตัะถะธั:
```json
{
  "display_login": "My.Shop",
  "username": "my.shop",
  "password_hash": "$2b$12$...",
  "created_at": "2025-01-01T12:00:00+00:00",
  "company_name": "My.Shop",
  "email": null,
  "wb_api": null,
  "ms_api": null
}
```

* ะะฐัะพะปั ััะฐะฝะธััั ะบะฐะบ bcrypt-ัะตั (`bcrypt`).
* WB-ัะพะบะตะฝั ะดะพะฟััะบะฐัั 32โ4096 ัะธะผะฒะพะปะพะฒ `[A-Za-z0-9._=-]`.
* ะขะพะบะตะฝั ยซะะพะน ะกะบะปะฐะดยป โ 16โ4096 ัะธะผะฒะพะปะพะฒ `[A-Za-z0-9._:/+=-]`.

`sessions.json` โ ะฟะปะพัะบะธะน ัะปะพะฒะฐัั ั ะฟัะธะฒัะทะบะพะน `chat_id -> username` ะธ ะพัะผะตัะบะพะน ะฒัะตะผะตะฝะธ `since`. ะะฝ ััะฐะฝะธััั ัะพะปัะบะพ ะปะพะบะฐะปัะฝะพ, ะฟะพััะพะผั ะฒะพัััะฐะฝะพะฒะธัั ะฐะฒัะพัะธะทะพะฒะฐะฝะฝะพะต ัะพััะพัะฝะธะต ะฟะพัะปะต ะฟะตัะตะตะทะดะฐ ะฒะพะทะผะพะถะฝะพ **ัะพะปัะบะพ** ะฟัะธ ะฝะฐะปะธัะธะธ ัะฐะนะปะพะฒ ะธะท `data/`.

### ๐ช ยซะัะนัะธ ะธะท ะฟัะพัะธะปัยป ะฟัะพัะธะฒ ๐๏ธ ยซะฃะดะฐะปะธัั ะฐะบะบะฐัะฝัยป

* **โ๏ธ ะัะนัะธ** โ ะฟัะพััะพ ะทะฐะบััะฒะฐะตั ะบะฐััะพัะบั ะฒ ัะฐัะต. ะกะตััะธั ะพััะฐัััั ะฐะบัะธะฒะฝะพะน, ะฟะพะฒัะพัะฝะพะต `/start` ะฒะตัะฝัั ะฝะฐ ะฐะบััะฐะปัะฝัะน ัะบัะฐะฝ.
* **๐ช ะัะนัะธ ะธะท ะฟัะพัะธะปั** โ ัะดะฐะปัะตั `chat_id` ะธะท `sessions.json`, ะฝะพ ัะฐะนะปั ะฐะบะบะฐัะฝัะฐ ะฒ `data/accounts/<username>/` ะพััะฐัััั. ะะพะปัะทะพะฒะฐัะตะปั ัะฒะธะดะธั ะณะพััะตะฒะพะต ะผะตะฝั ะธ ัะผะพะถะตั ัะฝะพะฒะฐ ะฒะพะนัะธ.
* **๐๏ธ ะฃะดะฐะปะธัั ะฐะบะบะฐัะฝั** โ ัะฝะธะผะฐะตั ัะตััะธั, ัะธะทะธัะตัะบะธ ัะดะฐะปัะตั ะบะฐัะฐะปะพะณ `data/accounts/<username>/` (ะฒัั ะฒะปะพะถะตะฝะฝะพััั, ะบัั ะธ ะฟัะพัะธะปั) ะธ ะฟะพะบะฐะทัะฒะฐะตั ะณะพััะตะฒะพะต ะผะตะฝั ั ัะพััะพะผ ยซะะบะบะฐัะฝั ัะดะฐะปัะฝ. ะั ะผะพะถะตัะต ัะพะทะดะฐัั ะฝะพะฒัะน ะฒ ะปัะฑะพะต ะฒัะตะผัยป. ะะฟะตัะฐัะธั ะฝะตะพะฑัะฐัะธะผะฐ.

ะฃะดะฐะปะตะฝะธะต ะฝะตะดะพัััะฟะฝะพ ะดะปั ะณะพััะตะน: ะบะฐััะพัะบะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฟะพัะฒะปัะตััั ัะพะปัะบะพ ั ะฐะฒัะพัะธะทะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน. ะัะธ ะฟะพะฒัะพัะฝะพะน ัะตะณะธัััะฐัะธะธ ั ัะตะผ ะถะต ะปะพะณะธะฝะพะผ ัะพะทะดะฐัััั ัะธััะฐั ะฟะฐะฟะบะฐ ะฐะบะบะฐัะฝัะฐ.

## โ๏ธ ะะฟัะธะพะฝะฐะปัะฝัะต ะทะฐะฒะธัะธะผะพััะธ

* `orjson` โ ะตัะปะธ ัััะฐะฝะพะฒะปะตะฝ, ะปะพะณะธ ะฟะธััััั ะฑััััะตะต. ะัะธ ะพััััััะฒะธะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟะพะปัะทัะตััั ััะฐะฝะดะฐััะฝัะน `json` (ััะฝะบัะธั `json_dumps`).
* `httpx[http2]` โ ะฒะบะปััะฐะตั HTTP/2, ะฝะพ ะฑะพั ะบะพััะตะบัะฝะพ ัะฐะฑะพัะฐะตั ะธ ะฑะตะท ะฟะฐะบะตัะฐ `h2`.

## ๐งช ะัะพะฒะตัะบะฐ

```bash
pytest
ruff check src tests
black --check src tests
mypy src
```

## ๐ผ๏ธ ะกะบัะธะฝัะพัั

ะ ะบะฐัะฐะปะพะณะต `docs/screenshots/` ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝั ะผะตััะฐ ะดะปั ะธะทะพะฑัะฐะถะตะฝะธะน ะณะปะฐะฒะฝัั ัะบัะฐะฝะพะฒ (Home, Auth, Profile). ะะพะฑะฐะฒััะต ะธั ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะดะปั ะฟัะตะทะตะฝัะฐัะธะน.
