# Postavleno_Bot

## 1. –û–±–∑–æ—Ä
Postavleno_Bot ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ Wildberries –∏ –ú–æ–π–°–∫–ª–∞–¥. –û–Ω —Ö—Ä–∞–Ω–∏—Ç —É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª—é—á–∞–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –≤—ã–≥—Ä—É–∂–∞—Ç—å –æ—Ç—á—ë—Ç—ã –≤ XLSX. –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö;
- –ø—Ä–æ—Ñ–∏–ª—å —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏, —Ç–æ–∫–µ–Ω–æ–≤ WB –∏ –ú–æ–π–°–∫–ª–∞–¥, –ø–æ—á—Ç—ã;
- –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –≤—ã–≥—Ä—É–∑–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ WB (–æ–±—â–∏–µ –∏ –ø–æ —Å–∫–ª–∞–¥–∞–º) –∏ –ú–æ–π–°–∫–ª–∞–¥;
- –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏, —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –µ–¥–∏–Ω–∞—è –∫–∞—Ä—Ç–æ—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è.

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.12
- aiogram 3
- httpx (HTTP-–∫–ª–∏–µ–Ω—Ç, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ—Ç—Ä–∞–µ–≤ –∏ HTTP/2)
- pandas + openpyxl (—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ XLSX)
- pydantic, orjson (–≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞ —Å JSON)
- ruff, black, mypy, pytest (–∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞)

## 3. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ `data/accounts/{login}`:
```
<login>/
  profile.json   # –ø—Ä–æ—Ñ–∏–ª—å –∏ —Ç–æ–∫–µ–Ω—ã
  exports/       # –≤—ã–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã
```
–£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —É–¥–∞–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ø–∞–ø–∫—É. –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `data/sessions.json`.

## 4. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ:
   - Windows:
     ```bash
     py -3.12 -m venv .venv
     .venv\Scripts\activate
     ```
   - Linux/macOS:
     ```bash
     python3.12 -m venv .venv
     source .venv/bin/activate
     ```
2. –û–±–Ω–æ–≤–∏—Ç–µ pip –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -U pip
   pip install -r requirements.txt
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`BOT_TOKEN`, `ACCOUNTS_DIR`, —Ç–∞–π–º–∞—É—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python -m postavleno_bot.main
   ```

## 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω:**
  - `üë§ –ü—Ä–æ—Ñ–∏–ª—å`
  - `üìä –û—Å—Ç–∞—Ç–∫–∏ WB (–û–±—â–∏–µ)`
  - `üè∑Ô∏è –û—Å—Ç–∞—Ç–∫–∏ WB (–°–∫–ª–∞–¥—ã)`
  - `üìò –û—Å—Ç–∞—Ç–∫–∏ –ú–æ–π –°–∫–ª–∞–¥`
  - `üîÑ –û–±–Ω–æ–≤–∏—Ç—å`
  - `‚úñÔ∏è –í—ã–π—Ç–∏`
  –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: `–†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å, {–ò–º—èTG}! ‚ú®` —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
- **–ü—Ä–æ—Ñ–∏–ª—å:** –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏, —Ç–æ–∫–µ–Ω–æ–≤, –ø–æ—á—Ç—ã; –∑–∞–ø—É—Å–∫ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤; –∫–Ω–æ–ø–∫–∏ `üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç`, `üö™ –í—ã–π—Ç–∏ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è`, `‚úñÔ∏è –í—ã–π—Ç–∏`.
- **–≠–∫—Å–ø–æ—Ä—Ç—ã:** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `data/accounts/{login}/exports/` —Å –∏–º–µ–Ω–∞–º–∏ –≤–∏–¥–∞ `wb_ostatki_ALL_YYYYMMDD_HHMM.xlsx`.
- –õ—é–±–æ–π –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–π –≤–≤–æ–¥ —É–¥–∞–ª—è–µ—Ç—Å—è –∏ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–æ–π `–ù–µ –ø–æ–Ω—è–ª –∑–∞–ø—Ä–æ—Å ü§î` —Å –∫–Ω–æ–ø–∫–∞–º–∏ `üîÅ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å` –∏ `‚úñÔ∏è –í—ã–π—Ç–∏`.
- –ü—Ä–∏ –æ—à–∏–±–∫–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É: `–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–æ–±—Ä–∞—Ç—å —Ñ–∞–π–ª üòï –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á {WB|–ú–æ–π–°–∫–ª–∞–¥} –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.`

## 6. –¢–µ—Å—Ç—ã
–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–∞–Ω–¥–æ–π:
```bash
pytest
```
–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ª–∏–Ω—Ç–∏–Ω–≥–∞/—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å `ruff`, `black --check`, `mypy`.

## 7. –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥
- `ModuleNotFoundError: ... orjson` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`pip install -r requirements.txt`).
- –û—à–∏–±–∫–∏ –ø—Ä–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`sqlalchemy`, `bcrypt` –∏ —Ç.–ø.) —Ä–µ—à–∞—é—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏–∑ `requirements.txt`.
- `401`/`400` –æ—Ç –ú–æ–π–°–∫–ª–∞–¥ ‚Äî —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω —Ç–æ–∫–µ–Ω (–±–µ–∑ –ø–∞—Ä–æ–ª—è). –ë–æ—Ç —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ—Ç BasicAuth, –∑–∞—Ç–µ–º Bearer, –¥–æ–±–∞–≤–ª—è—è `Accept: application/json`.
- –ü—É—Å—Ç–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ WB ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.

## 8. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
  postavleno_bot/
    core/           # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    handlers/       # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã UI
    integrations/   # –∫–ª–∏–µ–Ω—Ç—ã API WB –∏ –ú–æ–π–°–∫–ª–∞–¥
    services/       # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç—ã
    ui/             # –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —Ç–µ–∫—Å—Ç—ã –∫–∞—Ä—Ç–æ—á–µ–∫
    utils/          # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (HTTP, Excel)
tests/              # pytest-—Ç–µ—Å—Ç—ã
```

## 9. –õ–æ–≥–∏
–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è JSON/–±–æ–≥–∞—Ç—ã–π —Ñ–æ—Ä–º–∞—Ç). –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–∫–∏:
- `http.success`, `http.retry`, `http.failure` ‚Äî —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã;
- `export.ready`, `export.failed`, `export.delivery_failed` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–≥—Ä—É–∑–æ–∫;
- `integrations.ms` ‚Äî –æ—Ç–≤–µ—Ç—ã –ú–æ–π–°–∫–ª–∞–¥ (–≤–∫–ª—é—á–∞—è —Ç–µ–ª–æ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö);
- `account delete` —Å–æ–±—ã—Ç–∏—è –ø–∏—à—É—Ç—Å—è –≤ `audit`-–ª–æ–≥–≥–µ—Ä.

–•—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ `data/` –∏ –ª–æ–≥–æ–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
